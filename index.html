<html>
<body>
    <div class="Menu">
        <ul>
            <li><a href="#" onclick="stop();">Stop</a></li>
            <li>Points: <span class="points">0</span></li>
        </ul>
    </div>
<canvas id="canvas" width="800" height="600"></canvas>

<script>
    var pointsCounter = 0;
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    function plot(x,y,size,color) {

        if(!color) color = "#FF0000";

        if(!size) size = 1;

        ctx.fillStyle = color;
        ctx.fillRect(x,y,size,size);
        ctx.fill();
    }


    var points = [
        { x:100, y:500  },
        { x:50, y:150  },
        { x:500, y:200  },
    ];

    points.forEach(function(point) {
        plot(point.x,point.y,5);
    });


    var voyager = {
        x:150, y:300,
    };

    function voyage(voyager) {
        var dest = points[Math.random()*3|0];
        voyager.x = (dest.x + voyager.x)/2;
        voyager.y = (dest.y + voyager.y)/2;
        plot(voyager.x,voyager.y,1,"#0000FF");
        pointsCounter++;
    }


    function superVoyage() {
        for(var i=0;i<10;i++) {
            voyage(voyager);
        }
        points.forEach(function(point) {
            plot(point.x,point.y,5);
        });
        document.getElementsByClassName('points')[0].innerHTML = pointsCounter;
    }


    var thread = setInterval(
        function() {
            superVoyage();
        },1
    );


    function stop() {
        clearInterval(thread);
    }


</script>
</body>
</html>
